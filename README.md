# Simulating Audio Synthesizer on Satellite DFH-1

------
This code demonstrates a wave synthesizer that mathematically generates a piece of music named "The East Is Red".

![wave-plot](https://github.com/opxarch/privdats/blob/master/synthesizer-on-satellite-DFH-1/plot-01.GIF?raw=true)
(Plot: X-axis = Sample, Y-axis = Amplitude, Title = time-domain view of the wave the synthesizer made)

## Background of this item

After China launched its first satellite (DFH-1), in 1970, "The East Is Red" was the first signal the craft sent back to Earth, and the synthesizer that played the song was designed by 502 research laboratory, which seems to be the first electronic music synthesizer in Asia.

![satellite (DFH-1)](https://github.com/opxarch/privdats/blob/master/synthesizer-on-satellite-DFH-1/01.jpg?raw=true)

To honour the memory of this event, we have made a program that simulate the synthesizer loaded by DFH-1 satellite.
The physical circuit is described in a book [1] published in 1971. However, It's highly possible that the design may be not the original design, so we have to guess the original design by analysing historical audio recording.

<span style="font-size:8px">[1]: 《东方红半导体演奏器》,1971, 上海人民出版社</span>


## There are some special designs of our program:

* (1). <span style="color:#003399;">Tremolo Modulator</span>:
based on LFO Modulator, simply shifting the amplitude of wave. The factor of tremolo modulator is gradually increasing to imitate musicianship.

![Tremolo Modulator](https://github.com/opxarch/privdats/blob/master/synthesizer-on-satellite-DFH-1/plot-03.GIF?raw=true)
(Plot: X-axis = Sample, Y-axis = Modulation coefficient)

* (2). <span style="color:#003399;">ADS( Attack,Decay,Sustain ) envelope generator</span>:
according to the basic theory of musical instruments, the sound process of a musical instrument can be divided into four stages: attack, hold, decay, and sustain, so we selected the ADS to implement the envelope generator.

![ADS envelope generator](https://github.com/opxarch/privdats/blob/master/synthesizer-on-satellite-DFH-1/plot-02.GIF?raw=true)
(Plot: X-axis = Sample, Y-axis = Envelope coefficient)

* (3). <span style="color:#003399;">Frequency Error Generator</span>::
as the circuit of DHF-1 synthesizer is constructed by old fashioned transistors, to make the sounds from our algorithm more analog-like, we added a frequency error generator, whose curve is generated by sin function, to modulate source frequency, which is propitious to restoring the analog feelings.

![Frequency Error Generator](https://github.com/opxarch/privdats/blob/master/synthesizer-on-satellite-DFH-1/plot-04.GIF?raw=true)
(Plot: X-axis = Sample, Y-axis = error ratio)

* (4). <span style="color:#003399;">Chebyshev filter</span>:
firstly, the filter is used to cut off the higher harmonics.
secondly, since the signal sent from the satellite was transfering by the radio, details of signal may be lost. To simulate this kind of loss, we implemented a Chebyshev filter whose cutoff is approximately 3KHz, and the output signal will be more like being received by a real radio.

![FFT View](https://github.com/opxarch/privdats/blob/master/synthesizer-on-satellite-DFH-1/plot-05.GIF?raw=true)
(Plot: X-axis = (freq * 2), Y-axis = magnitude)

* (5). <span style="color:#003399;">Pitch Shifter</span>:
as there exists a process from circuit powering on to achieving stability that the sound is artistic, a simple pitch shifter is added to create this effect.

## The compressed audio file "output.mp3" is based on the final output of our program...

This image displays the audio our program generated:
![Wave](https://github.com/opxarch/privdats/blob/master/synthesizer-on-satellite-DFH-1/02.JPG?raw=true)

The following image displays how the envelope generator and tremolo modulator works:

![Wave](https://github.com/opxarch/privdats/blob/master/synthesizer-on-satellite-DFH-1/03.JPG?raw=true)

## Figure Ploting

The source data is captured from C program, and ploted by 'plot_data.py'
